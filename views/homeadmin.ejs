<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    <script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css">
    <link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css">

    <style>
        /* .demo {
            width: 200px;
            height: 50px;
        } */

        /* .text {
            padding-left: 200px;
        } */

        .header {

            height: 100%;
        }

        h1 {
            color: red;
            padding-left: 335px;
            position: absolute;
        }

        .seach {
            padding-left: 1000px
        }

        .seach-input {
            width: 200px;
            height: 36px;
        }
        .position {
            padding: 20px 0px;
            margin-top: 30px;
        }
        label{
            padding-right: 10px;
            font-weight: 500;
        }

        .staff{
            padding: 6px 20px;
        }

        .agency{
            padding: 6px 35px;
        }

        .input-daterange input{
            text-align: left !important;
        }

    </style>

    <script>
        $(function () {
            $('.input-daterange').datepicker({
                format: "yyyy-mm-dd",
                autoclose: true,
                todayHighlight: true,
            });
        });
    </script>


</head>

<body>
    <div class="header">
        <H1>SIM SỐ</H1>
        <div class="seach">
            <nav class="navbar navbar-light bg-light justify-content-between">
                <form class="form-inline">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
            </nav>
        </div>
        <div class="container position">
            <div class="row">
                <div class="col-md-6">
                    <div class="text">
                        <a href="/page-user"><button type="button" class="staff btn btn-outline-success">Nhân
                                Viên</button></a>
                        <a href="/page-daili"><button type="button" class="agency btn btn-outline-danger">Đại
                                Lí</button></a>
                    </div>
                </div>

                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="form-inline input-daterange" id="datepicker">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="start_date">From </label>
                                <input type="text" class="form-control" id="date" placeholder="..." name="start_date" />
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="end_date">To </label>
                                <input type="text" class="form-control" id="date" placeholder="..." name="end_date" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">STT</th>
                    <th scope="col">Thời Gian</th>
                    <th scope="col">Số Sim</th>
                    <th scope="col">Giá Nhập</th>
                    <th scope="col">Giá Bán</th>
                    <th scope="col">Đại Lý</th>
                    <th scope="col">Loại giao dịch</th>
                    <th scope="col">Phí giao hàng</th>
                    <th scope="col">Đại lý hỗ trợ</th>
                    <th scope="col">Nhân Viên</th>
                    <th scope="col">Trạng Thái</th>

                </tr>

            </thead>

            <tbody id="cart-data">

                <% for(var i = 0; i < page_data.length;i++){ %>
                <tr>
                    <th scope="row"> <%= i+1  %> </th>
                    <td><%= page_data[i].createdAt.toLocaleString() %></td>
                    <td><%= page_data[i].sim %></td>
                    <td><%= page_data[i].entryPrice %></td>
                    <td><%= page_data[i].price %></td>
                    <td><%= page_data[i].name %></td>
                    <td><%= page_data[i].typeTrade %></td>
                    <td><%= page_data[i].fee %></td>
                    <td><%= page_data[i].agencySupport %></td>
                    <td><%= page_data[i].user %></td>
                    <td><%= page_data[i].status %></td>
                </tr>
                <% } %>
            </tbody>

        </table>
        <nav aria-label="Page navigation example">
            <ul class="pagination list-page-link">
                <li class="page-item previous" val="<%=i%>"><a class="page-link" href="#">Previous</a></li>
                <% for(var i = 1; i <= totalPageLink;i++){ %>
                <li class="page-item li-link" val="<%= i %>"><a class="page-link" href="#"> <%= i %> </a></li>
                <% } %>
                <li class="page-item next" val="<%=i%>"><a class="page-link" href="#">Next</a></li>
            </ul>
        </nav>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css">
</body>
<script>

        $(document).ready(function(){
            var date_input=$('input[name="date"]'); //our date input has the name "date"
            var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
            date_input.datepicker({
                format: 'mm/dd/yyyy',
                container: container,
                todayHighlight: true,
                autoclose: true,
            })
        })

      $(".next").click(function () {
        var indexPage = parseInt($(this).attr("val"));
        var totalPage =parseInt( $(".li-link").last().attr("val"))
        if(indexPage >= totalPage){
            $(this).hide();
            $(this).attr("val",0);
            page(totalPage);
            return;
        }else{
            $(this).show();
            $(this).attr("val",indexPage+1);
            $('#cart-data').html("")
            page(indexPage+1)
        }
    
    })
    // $(".previous").click(function () {
        
    //     var previous = $(this).attr("val")
    //     $('#cart-data').html("")
    //     page(parseInt(indexPage)-1)
    // })
   
    $(".li-link").click(function () {
         indexPage = parseInt($(this).attr("val"))
        $('#cart-data').html("")
        page(indexPage)
    })
    function list_link_page() {
        $.ajax({
            url: "/cart/totalPageLinkCart",
            type: "get"
        }).then(function (data) {
            for (var i = 1; i <= data; i++) {
                var template = `
                <li class="page-item li-link" val="${i}"><a class="page-link" href="#">${i}</a></li>
                `
                $(".previous").append(template)
            } 
        })
    }
    function page(numberPage) {
        $.ajax({
            url: "/cart/page/" + numberPage,
            type: "get"
        }).then(function (data) {
            for (var i = 0; i < data.length; i++) {
                var template = `
                    <tr>
                        <th scope="row"> ${i + 1} </th>
                        <td>${data[i].createdAt.toLocaleString()}</td>
                        <td>${data[i].sim}</td>
                        <td>${data[i].entryPrice}</td>
                        <td>${data[i].price}</td>
                        <td>${data[i].name}</td>
                        <td>${data[i].typeTrade}</td>
                        <td>${data[i].fee}</td>
                        <td>${data[i].agencySupport}</td>
                        <td>${data[i].status}</td>
                        <td>${data[i].user}</td>    
                    </tr>
                    `
                $("#cart-data").append(template);
            }

        })
    }

    $(function () {
        $('#datetimepicker4').datepicker();
    });
</script>

</html>